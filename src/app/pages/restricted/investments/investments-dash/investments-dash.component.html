<main class="min-h-screen bg-zinc-50 dark:bg-slate-900">
	<section class="z-2 flex min-h-screen flex-row items-stretch gap-0 px-10 pt-20 desktop-2k:container">
		<section
			class="relative my-8 flex max-h-[calc(100vh-144px)] min-h-[600px] w-[350px] flex-col gap-4 overflow-y-auto border-r border-zinc-300/40 p-4 dark:border-slate-50/[0.06]"
		>
			<button
				type="button"
				class="group/link flex select-none flex-row items-center justify-center rounded-lg bg-zinc-100 px-3 py-2 text-sm transition-transform hover:-translate-y-0.5 active:scale-95 dark:bg-slate-900"
				routerLink="/new"
				[disabled]="this.loadingWallets()"
			>
				<fa-icon
					class="mr-2 group-hover/link:text-dongs-500"
					[icon]="icons().faPlus"
				/>
				<span class="font-medium group-hover/link:text-dongs-500">New Wallet</span>
			</button>
			@if (this.loadingWallets()) {
				<div class="flex h-full w-full items-center justify-center">
					<kds-loading-spinner
						size="xl"
						color="zinc"
					/>
				</div>
			} @else if (this.wallets().length) {
				@for (wallet of this.wallets(); track wallet.wallet_id) {
					<div
						class="cursor-pointer select-none rounded-lg border border-zinc-300/40 p-4 dark:border-slate-50/[0.06]"
						[class]="{
							'ring-2': this.selected_wallets().has(wallet.wallet_id),
							'ring-dongs-400/65': this.selected_wallets().has(wallet.wallet_id),
						}"
						(click)="handleSelectMoreWallets($event, wallet.wallet_id)"
					>
						<div class="flex flex-row">
							<div class="flex flex-1 flex-col gap-0.5">
								<span class="text-sm font-semibold text-dongs-500">{{ wallet.wallet_name }}</span>
								<div class="flex flex-row items-center gap-1.5 *:font-mono *:text-slate-400">
									<fa-icon
										class="text-[.65rem]"
										[icon]="icons().faRotate"
									></fa-icon>
									<span class="text-[.7rem]">{{ wallet.wallet_last_updated | date: 'dd/MM/yy HH:mm' }}</span>
								</div>
							</div>
							@if (this.selected_wallets().has(wallet.wallet_id)) {
								<div class="flex flex-col items-center justify-center px-2">
									<fa-icon
										class="text-dongs-500"
										[icon]="icons().faCheck"
									></fa-icon>
								</div>
							}
						</div>
						<hr class="kds-h-divider-inverted !my-3 !h-px text-slate-400" />
						<div class="flex flex-col gap-2.5">
							<div class="flex flex-row items-center justify-between">
								<span class="text-xs text-slate-500">Input Balance:</span>
								<div class="flex flex-col items-center gap-0.5">
									<span class="text-xs font-semibold text-slate-500">
										{{ wallet.wallet_input_balance | currency: wallet.wallet_currency : 'symbol' : '0.0-2' }}
									</span>
									<div
										class="h-0.5 w-full rounded-full bg-zinc-300/60"
										[class.opacity-0]="!this.selected_wallets().has(wallet.wallet_id)"
									>
										<div
											class="h-[2.5px] rounded-full bg-amber-400"
											[style.width]="this.selected_wallets().get(wallet.wallet_id)?.input_balance_percentage_of"
										></div>
									</div>
								</div>
							</div>
							<div class="flex flex-row items-center justify-between">
								<span class="text-xs text-slate-500">Current Balance:</span>
								<div class="flex flex-col items-center gap-0.5">
									<span class="text-xs font-semibold text-slate-500">
										{{ wallet.wallet_current_balance | currency: wallet.wallet_currency : 'symbol' : '0.0-2' }}
									</span>
									<div class="h-0.5 w-full opacity-0"></div>
								</div>
							</div>
							<div class="flex flex-row items-center justify-center rounded-lg border border-dashed border-zinc-300/40 px-2 py-4 dark:border-slate-50/[0.06]">
								<div class="flex flex-row items-end justify-center gap-2">
									<span
										class="text-[.7rem] font-semibold"
										[class]="{
											'text-emerald-600': wallet.wallet_profit_in_perc > 0,
											'text-red-500': wallet.wallet_profit_in_perc < 0,
										}"
									>
										{{ wallet.wallet_profit_in_perc | percent: '0.0-2' }}
									</span>
									<div class="flex flex-col items-center gap-0.5">
										<span class="text-xs font-semibold">
											{{ wallet.wallet_profit_in_curncy | currency: wallet.wallet_currency : 'symbol' : '0.0-2' }}
										</span>
										<div
											class="h-0.5 w-full rounded-full bg-zinc-300/60"
											[class.opacity-0]="!this.selected_wallets().has(wallet.wallet_id)"
										>
											<div
												class="h-[2.5px] rounded-full bg-amber-400"
												[style.width]="this.selected_wallets().get(wallet.wallet_id)?.profit_percentage_of"
											></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				}
			} @else {
				<div class="flex h-full w-full items-center justify-center">
					<div class="flex select-none flex-col items-center justify-center p-6 text-xl font-semibold text-slate-400">No Wallets</div>
				</div>
			}
		</section>
		<section class="my-8 flex flex-1 flex-col p-4">
			<menu class="flex flex-row items-center justify-between">
				<div class="flex flex-row gap-2">
					<button
						type="button"
						class="group/link flex select-none flex-row items-center justify-center rounded-lg bg-zinc-100 px-3 py-2 text-sm transition-transform hover:-translate-y-0.5 active:scale-95 dark:bg-slate-900"
						[class]="{
							'ring-2': this.selected_panel() === 'performance',
							'ring-dongs-500/65': this.selected_panel() === 'performance',
						}"
						(click)="handleDetailPanelChange('performance')"
					>
						<fa-icon
							class="mr-2 group-hover/link:text-dongs-500"
							[icon]="icons().faChartBar"
						/>
						<span class="font-medium group-hover/link:text-dongs-500">Performance</span>
					</button>
					<button
						type="button"
						class="group/link flex select-none flex-row items-center justify-center rounded-lg bg-zinc-100 px-3 py-2 text-sm transition-transform hover:-translate-y-0.5 active:scale-95 dark:bg-slate-900"
						[class]="{
							'ring-2': this.selected_panel() === 'balance_history',
							'ring-dongs-500/65': this.selected_panel() === 'balance_history',
						}"
						(click)="handleDetailPanelChange('balance_history')"
					>
						<fa-icon
							class="mr-2 group-hover/link:text-dongs-500"
							[icon]="icons().faTimeline"
						/>
						<span class="font-medium group-hover/link:text-dongs-500">Balance History</span>
					</button>
					<button
						type="button"
						class="group/link flex select-none flex-row items-center justify-center rounded-lg bg-zinc-100 px-3 py-2 text-sm transition-transform hover:-translate-y-0.5 active:scale-95 dark:bg-slate-900"
						[class]="{
							'ring-2': this.selected_panel() === 'assets',
							'ring-dongs-500/65': this.selected_panel() === 'assets',
						}"
						(click)="handleDetailPanelChange('assets')"
					>
						<fa-icon
							class="mr-2 group-hover/link:text-dongs-500"
							[icon]="icons().faFileInvoiceDollar"
						/>
						<span class="font-medium group-hover/link:text-dongs-500">Assets</span>
					</button>
				</div>
				<div class="flex flex-row gap-2">
					<div class="flex flex-row">
						<div class="flex flex-row items-center rounded-l-lg border-r border-dashed bg-zinc-100 px-3 py-2 text-xs dark:bg-slate-900">
							<span class="font-medium capitalize text-dongs-500">{{ selected_currency() | lowercase }}</span>
						</div>
						<button
							type="button"
							class="group/link flex select-none flex-row items-center justify-center rounded-r-lg bg-zinc-100 px-3 py-2 text-sm transition-transform active:scale-95 dark:bg-slate-900"
						>
							<fa-icon
								class="mr-2 group-hover/link:text-dongs-500"
								[icon]="icons().faCaretDown"
							></fa-icon>
							<span class="font-medium group-hover/link:text-dongs-500">Currency</span>
						</button>
					</div>
				</div>
			</menu>
			<section class="mt-4 flex flex-col gap-2"></section>
		</section>
	</section>
</main>
